小程序主要分为   流行  书籍    喜欢  三部分

流行页面逻辑   

将点赞的元素单独  提取为组件   只需传入  数值  与状态  可以供页面其他 地方调用
进入页面时   获取最新的期刊 并将其期刊号  以及对应的数据  存入缓存
在触发切换时   判断要加载的是 上一期 还是  下一期 


若为上一期  则为当前期刊号减一    
若为下一期  则为当前期刊号加一


然后  去拿到对应的数据   点赞组件的状态也需要更新  
并判断是否为最新一期  和最后一期   
页面初始化加载的即为最新一期
然后禁用按钮状态 


将音乐  句子  电影  分别提取为组件   根据当前加载的信息的type   来显示  对应的组件 
减少页面切换   增强体验




书籍页面逻辑

定义搜索组件

将已经搜索过的数据存入缓存   组件加载时 从缓存中读取  
用户回车  或点击标签时   加载相应的数据   注意loading组件的展示  

点击标签时   或回车时与默认加载一样

监听用户上滑触底操作   返回随机字符串给搜索组件       搜索组件触发loadmore   


 loadmore  函数加载更多    此时要注意两个点  第一是否可以被继续加载  
 可以根据total字段来判断

是否有请求正在进行中  若有则返回


// 为什么要有锁的机制   就是为了不浪费服务器的性能   旨在必要的时候去加载数据
// 什么时候时侯为必要  
// 1.例如服务器还有数据  可以接着加载更多
// 2.服务器已经将上一次的请求处理完毕   并且还有可以被展示的数据   那么则执行加载
// 如果正在加载  返回    避免死锁  每次请求完毕  置空锁的状态




//  喜欢

用户授权    open-data    自定义button   open-data只能拿到头像   没有用户信息     
自定义组件   可以拿到信息   有利于复用


小程序跳转   必须关联同一个服务号或订阅号


















